<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Chat With Your Data</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- CSS Imports -->
  <link rel="stylesheet" href="styles/base.css">
  <link rel="stylesheet" href="styles/layout.css">
  <link rel="stylesheet" href="styles/components.css">
  <link rel="stylesheet" href="styles/theme.css">

  <!-- SheetJS (XLSX) Library for Excel parsing -->
  <script src="https://cdn.sheetjs.com/xlsx-0.18.10/package/dist/xlsx.full.min.js"></script>
</head>
<body>
  <header>
    <h1>Chat With Your Data</h1>
    <button id="themeToggle" class="theme-toggle">Toggle White Mode</button>
  </header>

  <main>
    <!-- ======================= STEP 1: Upload Data ======================= -->
    <section id="uploadSection" class="step-section">
      <h2>Upload Data Files</h2>
      <div id="fileDropArea" class="file-drop-area">
        <p>Drag &amp; drop your CSV or Excel file here,<br>or click to select.</p>
      </div>
      <input
        type="file"
        accept=".csv, .xlsx, .xls"
        id="fileInput"
        style="display: none;"
      />
      <button id="uploadBtn" class="upload-button">Browse File</button>
    </section>

    <!-- ======================= STEP 2: Data Preview ======================= -->
    <section id="previewSection" class="step-section hidden">
      <h2>Data Preview</h2>
      <div id="datasetShape" class="dataset-shape"></div>
      <table id="previewTable" class="preview-table"></table>
      <div class="step-actions">
        <!-- Back to Step 1 -->
        <button id="previewBackBtn" class="back-step-button">Back</button>
        <!-- Proceed to Step 3 -->
        <button id="previewNextBtn" class="next-step-button">Confirm &amp; Next Step</button>
      </div>
    </section>

    <!-- ======================= STEP 3: Data Documentation ======================= -->
    <section id="documentationSection" class="step-section hidden">
      <h2>Data Documentation</h2>
      <p>
        Please describe your dataset as deeply as possible. Provide an overview of what it contains and
        the meaning of each column or field.
      </p>
      <div class="doc-field">
        <label for="datasetDescription">Dataset Description</label>
        <textarea
          id="datasetDescription"
          rows="3"
          placeholder="Describe the dataset in detail..."
        ></textarea>
      </div>
      <!-- Additional column-specific fields will be added dynamically, if desired. -->
      <div class="step-actions">
        <!-- Back to Step 2 -->
        <button id="docBackBtn" class="back-step-button">Back</button>
        <!-- Proceed to Step 4 -->
        <button id="docNextBtn" class="next-step-button">Next Step</button>
      </div>
    </section>

    <!-- ======================= STEP 4: LLM-Generated Doc Preview ======================= -->
    <section id="llmDocSection" class="step-section hidden">
      <h2>LLM-Generated Documentation</h2>
      <p>
        Below is a sample of automatically generated documentation based on the data structure
        and your descriptions. Feel free to review and make edits before finalizing.
      </p>
      <div id="llmDocContent" class="llm-doc-content">
        <!-- The system or backend would populate this content. Here is a placeholder. -->
        <p><strong>Dataset Overview:</strong> Lorem ipsum dolor sit amet...</p>
        <p><strong>Column A:</strong> Sample auto-generated description.</p>
        <p><strong>Column B:</strong> Sample auto-generated description.</p>
      </div>
      <div class="step-actions">
        <!-- Back to Step 3 -->
        <button id="llmDocBackBtn" class="back-step-button">Back</button>
        <!-- Proceed to Step 5 -->
        <button id="llmDocNextBtn" class="next-step-button">Proceed to Chat</button>
      </div>
    </section>

    <!-- ======================= STEP 5: Chat with Your Data ======================= -->
    <section id="chatSection" class="step-section hidden">
      <h2>Chat with Your Data</h2>
      <div id="chatMessages" class="chat-messages"></div>
      <div id="chatInputArea" class="chat-input-area">
        <input
          type="text"
          id="chatInput"
          placeholder="Ask a question..."
        />
        <button id="chatSendBtn" class="chat-send-button">Send</button>
      </div>
      <div class="step-actions">
        <!-- Back to Step 4 -->
        <button id="chatBackBtn" class="back-step-button">Back</button>
      </div>
    </section>
  </main>

  <!-- JS Imports -->
  <script src="scripts/main.js"></script>
  <script src="scripts/fileUpload.js"></script>
  <script src="scripts/preview.js"></script>
  <script src="scripts/docMetadata.js"></script>
  <script src="scripts/chat.js"></script>
</body>
</html>
